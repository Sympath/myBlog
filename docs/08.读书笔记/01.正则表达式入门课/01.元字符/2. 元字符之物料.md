---
title: 1 元字符之物料
date: 2022-01-17 17:31:38
permalink: /pages/fe277f/
categories:
  - 读书笔记
  - 正则表达式入门课
tags:
  - 
---
### 前言

​		正则无论是用来获取某段内容，还是看是否匹配某个规则，说到底其实就是对文本信息的获取；对一个庞大东西的处理思路就像做递归

1. 找到最小单元
2. 设定重复



​		这样就能避免被大数据量搞到晕头转向了，文本也一样，本质是字符，对字符处理的最小单元自然是单个字符，而重复规模则用量词进行控制，这就迎来了本部分介绍的元字符主角：字符组和量词；

​		字符组决定选择单个字符的规则；量词则决定这个选中规则要处理多少个字符。

![image-20211212100028008](https://tva1.sinaimg.cn/large/008i3skNly1gxatijs5vhj30hc05pdfv.jpg)

​		让我们详细展开，就会发现很多像`\d`、`\w`之类的老朋友。

### 特殊单字符（字符组）

![image-20211212102032586](https://tva1.sinaimg.cn/large/008i3skNly1gxau3fojlfj30gx053glo.jpg)

##### 基础使用

​		对于单字符选择而言，在正则中的术语被称为**字符组**，接下来我们都会用这个术语，但不要被迷惑，它**并不是匹配一组数据，而只是匹配一组数据中的一个字符**，这点很关键。

**语法：** `[xxx]`

**匹配规则：** 目标文本需包含【任意一个包含在括号中的元素】

**获取信息规则：**将获取第一个【任意一个包含在括号中的元素】

**举例：** `/[abc]/`这个正则将匹配a、b、c中的任何一位且只有一位，默认匹配第一位，使用[测试平台](https://regex101.com/r/PnzZ4k/1)会得到如下结果

![image-20211212101306259](https://tva1.sinaimg.cn/large/008i3skNly1gxatvpd27jj30ln08mt91.jpg)





##### 取反逻辑

​		正常使用是范围内选取，不过也会出现【除了这些之外】的范围选取，这时就需要用到取反了

**语法：** `[^xxx]`

**匹配规则：** 目标文本需包含【任意一个不包含在括号中的元素】

**获取信息规则：**将获取第一个【任意一个不包含在括号中的元素】

**举例：** `/[^abc]/`这个正则将匹配非a、b、c中的任何一位且只有一位，默认匹配第一位，使用[测试平台](https://regex101.com/r/PnzZ4k/1)会得到如下结果

![image-20211212101843011](https://tva1.sinaimg.cn/large/008i3skNly1gxau1jfkzmj30km087jrt.jpg)



##### 常用字符组

​		八二原则同样适用在字符组中，有很多常见的匹配规则，没必要重复写，于是正则就把这些特殊字符组分别取了个别名

![image-20211212102101853](https://tva1.sinaimg.cn/large/008i3skNly1gxau3xwjq8j30e804wq31.jpg)

主要分为如下【3+1】概念，三对+一个

| 使用符号 | 规则                     | 对应字符组                                                   |
| -------- | ------------------------ | ------------------------------------------------------------ |
| \d       | 单个数字                 | [0-9]     （digit数字）                                      |
| \D       | 单个任意非数字           | [^0-9]                                                       |
| \w       | 单个任意数字字母下划线   | [0-9a-zA-Z_]    数字字符下划线                               |
| \W       | 单个任意非数字字母下划线 | [^0-9a-zA-Z_]   非单词字符                                   |
| \s       | 单个任意空白符           | [ \t\v\n\r\f]  表示空白符  （空格、水平制表符、垂直制表符、换行符、回车符、换页符） |
| \S       | 单个任意非空白符         | [^ \t\v\n\r\f]                                               |
| .        | 单个除换行符外任意字符   | [^\n\r\u2020\u2029]   通配符 除换行符、回车符、行分隔符、段分隔符外任意字符 |

其他常用字符组

| 对应字符组                        | 规则     |
| --------------------------------- | -------- |
| [\d\D] \| [\s\S] \| [\w\W] \| [^] | 任意字符 |

##### 空白字符

​		这类字符比较特殊，单独拎出来，方便后期直接使用

![image-20211212102918646](https://tva1.sinaimg.cn/large/008i3skNly1gxauckhhi6j30b107cglm.jpg)



​		到此，我们也就知道了如何去匹配单个字符，这就是我们的“最小规模”，但一个个匹配肯定是不行，那正则将冗长到难以忍受，所以我们还需要重复，这就是量词的作用。

### 量词

![image-20211212103215035](https://tva1.sinaimg.cn/large/008i3skNly1gxaufmels1j30ac06xdft.jpg)

​		这个没有很复杂的东西，唯一要注意的是，**正则默认是只匹配一次的**，即一次匹配完后就算后文还有符合的内容也不再获取，这涉及到修饰符`g`，后面再补充；

​		看案例就行，我们还是以`[abc]`作为字符组最小单元来演示。

##### *号：0-n次

**正则：** `/[abc]*/`

**匹配规则：** 目标文本无需包含【任意一个包含在括号中的元素】，此匹配规则一定成立

![image-20211212105956356](https://tva1.sinaimg.cn/large/008i3skNly1gxav8fln07j30lw08fq3j.jpg)

**获取信息规则：**将获取第一段【包含在括号中且连续的元素组】

![image-20211212104426218](https://tva1.sinaimg.cn/large/008i3skNly1gxausb0vtqj30me08j754.jpg)

##### +号：1+n次

**正则：** `/[abc]+/`

**获取信息规则：**将获取第一段【包含在括号中且连续的元素组】

![image-20211212105920428](https://tva1.sinaimg.cn/large/008i3skNly1gxav7t2ygfj30lu08mdgd.jpg)

**匹配规则：** 目标文本需包含【至少一个包含在括号中的元素】

![image-20211212105824231](https://tva1.sinaimg.cn/large/008i3skNly1gxav6u10cvj30lw09sgm8.jpg)



##### ?号：0次或1次

**正则：** `/[abc]?/`

**匹配规则：**此匹配规则一定成立

![image-20211212110246348](https://tva1.sinaimg.cn/large/008i3skNly1gxavbdvs8cj30lq06rq3d.jpg)

**获取信息规则：**将获取第一个【任意一个包含在括号中的元素】

![image-20211212110346923](https://tva1.sinaimg.cn/large/008i3skNly1gxavcfbjnlj30lv06jaab.jpg)



##### {}符号：精确控制次数

​		上面其实都属于特殊案例，我们可以通过`{}`精确控制匹配次数，主要有三个用法

- {m}：必须出现m次
- {m, n}：可以出现m-n次
- {m,}：至少出现m次

我们对这三种情况进行演示，动图如下

![2021-12-12 11.07.50](https://tva1.sinaimg.cn/large/008i3skNly1gxavsubpk7g30m209tq5b.gif)

至此，我们就完成了对量词规则的学习



### 总结

​		在正则的元字符中，根据【最小规模+重复】思路

- 通过字符组我们得知了如何设定选择单个字符的规则
- 通过量词我们将单个字符的处理范围扩大化

让我们用一个题目来强化学习吧！

##### 手机号的组成规则

1. 第 1 位固定为数字 1;
2. 第 2 位可能是 3，4，5，6，7，8，9;
3. 第 3 位到第 11 位我们认为可能是 0-9 任意数字。

请写出匹配正则

参考答案：`/^1[3-9]\d{9}&/`

