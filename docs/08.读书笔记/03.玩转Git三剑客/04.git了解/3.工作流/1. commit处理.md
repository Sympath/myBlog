---
title:  commit处理
date: 2022-01-17 18:12:00
permalink: /pages/e1179b/
categories:
  - 读书笔记
  - 玩转Git三剑客
  - git了解
  - 工作流
tags:
  - 
---
### 修改commit

##### 修改本地仓库上条commit对应的信息

```
git commit --amend
```



##### 修改本地仓库任意条commit对应的信息

可以使用rebase命令，加`-i`操作，意为操作指定commit后的所有commit；（自然可以修改提交的message信息）

1. 获取目标commit的前一个commit对应hash
2. 执行命令进入操作commit交互文件，更改模式改为修改信息操作（r, reword）
3. 保存退出后会进入修改交互文件，改为新的信息即可

```
git rebase -i a056746d6450638f45631d108be4d9a5a09a0472
```

日志

![image-20210914193458107](https://tva1.sinaimg.cn/large/008i3skNly1gugzhspfeoj60qm0b2gmk02.jpg)

操作commit交互文件，通过vi进行修改 

![image-20210914193858178](https://tva1.sinaimg.cn/large/008i3skNly1gugzhtbibcj61d40u00y902.jpg)

`esc -> wq`退出后会自动进入修改交互文件，使用vi语法修改message、保存、退出即可

![image-20210914194136299](https://tva1.sinaimg.cn/large/008i3skNly1gugzhsi46wj615l0u0q5f02.jpg)

这是就会出现提示成功的信息，如果查看日志也会发现改成功了

![image-20210914194246453](https://tva1.sinaimg.cn/large/008i3skNly1gugzhtmyggj61oy072wgf02.jpg)





### 合并（删除）commit

这只是删除commit记录，但更改的代码还是有的，可以使用`git rebase i [hash]`  + `s`，具体见下面案例

 先构建几个commit

![image-20210915080201612](https://tva1.sinaimg.cn/large/008i3skNly1gugzk75cjyj60xl04xdh002.jpg)

再获取测试1的父commit对应hash，然后执行`git rebase i [hash]`，最后对需要合并的测试2、3进行squash合并操作，再打印日志就会发现，测试2、3没了，只剩一个commit信息节点。

![2021-09-15 08.05.49](https://tva1.sinaimg.cn/large/008i3skNgy1gugztb1fsdg610y0h27i702.gif)

